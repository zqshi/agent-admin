# CogVision 用户操作手册

## 目录
1. [快速开始](#1-快速开始)
2. [监控仪表盘](#2-监控仪表盘)
3. [会话查询与追溯](#3-会话查询与追溯)
4. [A/B测试管理](#4-ab测试管理)
5. [数据分析与报表](#5-数据分析与报表)
6. [常见问题解答](#6-常见问题解答)

---

## 1. 快速开始

### 1.1 系统要求
- **浏览器要求**：Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **屏幕分辨率**：建议 1920x1080 及以上
- **网络要求**：稳定的互联网连接

### 1.2 首次登录
1. 打开浏览器，访问 CogVision 平台地址
2. 输入您的用户名和密码
3. 点击"登录"按钮进入系统

### 1.3 界面概览
![界面概览](./images/overview.png)

系统主界面包含以下几个部分：
- **侧边导航栏**：包含四大核心功能模块
- **顶部标题栏**：显示当前页面标题和基本信息
- **主内容区域**：显示具体功能页面内容

### 1.4 导航菜单
| 菜单项 | 功能说明 |
|-------|---------|
| 🏠 监控仪表盘 | 查看数字员工整体运行状态和关键指标 |
| 💬 会话查询 | 搜索和查看具体的用户对话记录 |
| 🧪 A/B测试 | 创建和管理数字员工的对比实验 |
| 📊 数据分析 | 生成详细的数据分析报表 |

---

## 2. 监控仪表盘

### 2.1 功能概述
监控仪表盘是系统的核心页面，提供数字员工运行状态的实时概览。

### 2.2 主要指标卡片

#### 实时流量指标
![实时指标](./images/realtime-metrics.png)

- **当前在线用户**：显示正在使用数字员工服务的用户数量
- **每分钟请求数(RPM)**：显示系统每分钟处理的请求数量
- **今日总会话数**：显示从午夜到现在的总会话数量
- **成功率**：显示成功处理的会话占总会话的比例

#### 性能指标
- **平均响应时间**：数字员工回复用户的平均耗时
- **总Token消耗**：LLM模型消耗的Token总数
- **失败会话数**：处理失败的会话数量

### 2.3 异常监控区域
![异常监控](./images/alert-monitoring.png)

#### 状态指示
- 🟢 **正常**：所有指标正常
- 🟡 **警告**：某些指标超出正常范围，需要关注
- 🔴 **异常**：系统出现问题，需要立即处理

#### 监控项目
- **服务可用性**：系统正常运行时间百分比
- **平均响应时间**：是否在可接受范围内
- **失败率**：失败请求的比例

### 2.4 服务状态地图
显示不同数字员工服务的运行状态：

| 服务名称 | 服务描述 | 状态示例 |
|---------|---------|---------|
| 客服助手 | GPT-4 + MCP工具链 | 🟢 正常 |
| 销售分析师 | Claude-3 + 数据工具 | 🟢 正常 |
| 内容生成器 | GPT-3.5 + 文本工具 | 🟡 警告 |

### 2.5 数据刷新
- **自动刷新**：页面每30秒自动更新数据
- **手动刷新**：点击右上角的刷新按钮立即更新
- **实时指示**：左上角的绿点表示数据连接正常

---

## 3. 会话查询与追溯

### 3.1 功能概述
会话查询功能帮助您快速定位和分析具体的用户对话，进行问题排查和质量分析。

### 3.2 搜索功能

#### 3.2.1 基础搜索
![搜索界面](./images/session-search.png)

**搜索条件：**
- **Session ID**：输入完整或部分会话ID
- **用户ID**：搜索特定用户的会话
- **关键词**：在对话内容中搜索关键词

**状态筛选：**
- 所有状态
- 成功会话
- 失败会话
- 运行中会话

#### 3.2.2 高级搜索
点击"高级搜索"展开更多筛选条件：
- **时间范围**：指定开始和结束时间
- **响应时间**：筛选响应时间范围
- **模型类型**：按使用的LLM模型筛选
- **工具类型**：按调用的工具类型筛选

### 3.3 会话列表

#### 3.3.1 列表信息
每个会话条目显示：
- **会话ID**：唯一标识符
- **状态标签**：成功(绿色) / 失败(红色)
- **用户信息**：用户ID
- **基本统计**：消息数量、响应时间
- **创建时间**：会话开始时间

#### 3.3.2 列表操作
- **点击选择**：点击任意会话查看详情
- **状态排序**：按状态、时间、响应时间排序
- **批量操作**：选择多个会话进行批量分析

### 3.4 会话详情分析

#### 3.4.1 基本信息卡片
![会话详情](./images/session-details.png)

显示会话的基本信息：
- 会话ID和用户ID
- 开始和结束时间
- 总消息数和响应时间
- 会话状态和结果

#### 3.4.2 对话流展示
**聊天界面风格显示：**
- 用户消息：蓝色气泡，右对齐
- 数字员工回复：灰色气泡，左对齐
- 时间戳：每条消息显示发送时间
- 消息编号：便于定位和引用

**交互功能：**
- 滚动查看：支持长对话的滚动浏览
- 消息搜索：Ctrl+F 在对话中搜索关键词
- 复制文本：点击消息可复制内容

#### 3.4.3 LLM推理追溯
**展开查看LLM处理过程：**

![LLM追溯](./images/llm-trace.png)

- **使用模型**：GPT-4、Claude-3等
- **完整提示词**：查看发送给LLM的完整prompt
- **原始回复**：LLM的原始输出内容
- **处理耗时**：推理和生成的时间
- **Token统计**：输入和输出的Token数量
- **费用信息**：本次调用的成本

#### 3.4.4 工具调用追溯
**查看MCP工具调用详情：**

![工具调用](./images/tool-trace.png)

**工具调用信息：**
- **工具名称**：如 query_database、send_email
- **调用时间**：工具执行的时间戳
- **请求参数**：传递给工具的参数(JSON格式)
- **执行结果**：工具返回的结果数据
- **执行状态**：成功(绿色) / 失败(红色)
- **执行耗时**：工具调用的响应时间
- **错误信息**：失败时的详细错误描述

#### 3.4.5 原始数据查看
**技术人员调试功能：**
- **JSON格式**：完整的会话数据结构
- **语法高亮**：便于阅读的代码格式
- **数据导出**：下载JSON文件进行离线分析
- **数据分享**：生成链接分享给其他团队成员

### 3.5 问题排查流程

#### 失败会话分析步骤：
1. **查看会话状态**：确认失败类型
2. **检查对话流**：找到失败发生的位置
3. **分析工具调用**：查看是否是工具调用失败
4. **检查LLM输出**：确认是否是模型输出问题
5. **查看错误信息**：获取具体的错误描述
6. **制定解决方案**：根据分析结果采取对应措施

---

## 4. A/B测试管理

### 4.1 功能概述
A/B测试功能帮助您科学地比较不同配置的数字员工性能，做出数据驱动的优化决策。

### 4.2 实验列表管理

#### 4.2.1 实验列表
![实验列表](./images/ab-test-list.png)

**列表信息：**
- **实验名称**：描述性的实验标题
- **实验状态**：
  - 📝 草稿：正在配置中
  - ▶️ 运行中：正在收集数据
  - ⏸️ 已暂停：暂时停止
  - ✅ 已完成：实验结束
- **创建时间**：实验开始时间
- **参与用户数**：已收集的样本数量
- **胜出标识**：🏆 表示有显著的胜出组

#### 4.2.2 快速操作
- **点击选择**：查看实验详情
- **状态筛选**：按实验状态筛选
- **创建实验**：点击右上角"创建实验"按钮

### 4.3 创建新实验

#### 4.3.1 基本信息设置
![创建实验](./images/create-experiment.png)

**必填信息：**
- **实验名称**：如"GPT-4 vs Claude-3 客服对比"
- **实验描述**：详细说明实验目的和预期
- **实验目标**：选择主要优化目标
  - 成功率提升
  - 响应时间优化
  - 用户满意度提升
  - 成本降低

**高级设置：**
- **预期运行时长**：建议至少运行7天
- **最小样本量**：确保统计显著性的最小用户数
- **置信度设置**：通常设置为95%

#### 4.3.2 实验组配置
**对照组设置：**
- **组名称**：如"对照组(GPT-4)"
- **流量比例**：通常设置为50%
- **模型配置**：
  - 模型类型：GPT-4
  - 模型参数：temperature=0.7
  - 最大Token：2048
- **提示词模板**：当前使用的提示词
- **可用工具**：选择该组可以使用的MCP工具

**实验组设置：**
- **组名称**：如"实验组(Claude-3)"
- **流量比例**：50%
- **差异化配置**：只需设置与对照组不同的部分

#### 4.3.3 流量分配策略
**分配方式：**
- **随机分配**：完全随机分配用户
- **用户ID哈希**：基于用户ID确保同一用户总是分配到同一组
- **地理位置**：按用户地理位置分配
- **渐进式推出**：从小流量开始逐步增加

### 4.4 实验监控与分析

#### 4.4.1 核心指标对比
![指标对比](./images/metrics-comparison.png)

**主要指标：**
- **成功率**：各组的会话成功率对比
- **平均响应时间**：响应速度对比
- **Token成本**：各组的平均成本
- **用户满意度**：如果有用户评分数据

**趋势图表：**
- **时间序列图**：观察指标随时间的变化
- **分布图**：查看数据的分布情况
- **对比柱状图**：直观对比各组差异

#### 4.4.2 统计显著性分析
![统计分析](./images/statistical-analysis.png)

**自动计算：**
- **P值**：统计显著性概率
- **置信区间**：差异的可信范围
- **样本量充足性**：是否收集了足够样本

**结论建议：**
- ✅ **显著胜出**：p < 0.05，有统计学意义
- ⚠️ **需要更多样本**：当前样本量不足
- ❌ **无显著差异**：两组表现相当

#### 4.4.3 实验组详细配置
**展开查看各组配置：**
- **模型参数对比**：并排显示配置差异
- **提示词差异**：高亮显示不同部分
- **工具集差异**：对比可用工具列表
- **性能数据**：各组的详细统计数据

### 4.5 实验操作管理

#### 4.5.1 实验控制
**运行中实验：**
- **暂停实验**：临时停止数据收集
- **终止实验**：提前结束实验
- **调整流量**：修改各组的流量比例

**已暂停实验：**
- **恢复实验**：继续数据收集
- **修改配置**：调整实验参数
- **终止实验**：彻底结束

#### 4.5.2 结果应用
**实验完成后：**
- **一键发布胜出配置**：将表现最好的配置应用到生产环境
- **导出实验报告**：生成详细的分析报告
- **配置备份**：保存实验配置供未来参考

### 4.6 最佳实践建议

#### 4.6.1 实验设计原则
- **单一变量**：每次实验只改变一个关键因素
- **充足样本**：确保每组至少有1000个样本
- **运行时长**：至少运行1周以避免偶然因素
- **业务影响**：考虑实验对用户体验的影响

#### 4.6.2 常见实验类型
- **模型对比**：比较不同LLM的表现
- **提示词优化**：测试不同的提示词模板
- **参数调优**：优化模型参数设置
- **工具配置**：测试不同的工具组合

---

## 5. 数据分析与报表

### 5.1 功能概述
数据分析模块提供深入的历史数据分析，帮助您了解数字员工的长期表现趋势和优化机会。

### 5.2 分析控制面板

#### 5.2.1 时间范围选择
![时间选择](./images/time-range-selector.png)

**预设时间范围：**
- 近1天：查看最近24小时数据
- 近7天：一周趋势分析
- 近30天：月度表现回顾
- 近90天：季度趋势分析

**自定义时间范围：**
- 点击日历图标选择具体开始和结束日期
- 支持最长1年的历史数据查询

#### 5.2.2 分析维度选择
**可选维度：**
- **按模型**：比较不同LLM的表现
- **按服务**：分析不同数字员工服务
- **按用户群体**：分析不同用户群的使用情况
- **按时间**：查看时间趋势变化

#### 5.2.3 指标选择
**核心指标：**
- Token消耗：分析成本变化
- 会话数量：了解使用量趋势
- 成功率：监控质量变化
- 响应时间：观察性能表现

### 5.3 Token成本分析

#### 5.3.1 成本分布图
![成本分析](./images/cost-analysis.png)

**展示内容：**
- **各模型成本占比**：饼图显示每个模型的成本比例
- **成本趋势线**：显示成本随时间的变化
- **同比增长率**：与历史同期比较

**详细数据表格：**
| 模型 | 总成本($) | 占比(%) | 增长率(%) | 平均单价 |
|------|----------|---------|-----------|----------|
| GPT-4 | 23,456 | 51.3% | +12% | $0.045 |
| Claude-3 | 18,234 | 39.8% | +8% | $0.032 |
| GPT-3.5 | 5,432 | 11.9% | -3% | $0.018 |

#### 5.3.2 成本优化建议
**自动生成建议：**
- 💡 **模型选择优化**：某些场景可以使用更便宜的模型
- 💡 **Token使用优化**：提示词可以进一步精简
- 💡 **缓存策略**：相似查询可以使用缓存结果

### 5.4 工具调用分析

#### 5.4.1 工具使用统计表
![工具分析](./images/tool-analysis.png)

**表格字段说明：**
- **工具名称**：MCP工具的名称
- **调用次数**：总的调用次数
- **失败次数**：调用失败的次数
- **失败率**：失败次数/总次数的百分比
- **平均耗时**：每次调用的平均响应时间

**状态标识：**
- 🟢 失败率 < 2%：表现良好
- 🟡 失败率 2-5%：需要关注
- 🔴 失败率 > 5%：需要优化

#### 5.4.2 工具性能排行
**最常用工具 TOP 5：**
1. query_sales_data (1,234次)
2. send_email (856次)
3. generate_report (654次)
4. query_user_info (432次)
5. create_ticket (321次)

**最稳定工具 TOP 5：**
按失败率从低到高排序

**需要优化的工具：**
失败率超过5%的工具列表及改进建议

### 5.5 问题分析报告

#### 5.5.1 错误类型分布
![错误分析](./images/error-analysis.png)

**错误分类统计：**
- **工具超时** (36.3%)：网络或服务响应慢
- **LLM生成内容不合规** (31.0%)：输出内容被过滤
- **参数错误** (18.4%)：工具调用参数不正确
- **网络连接失败** (9.4%)：网络连接问题
- **权限不足** (4.9%)：访问权限问题

#### 5.5.2 错误趋势分析
**时间趋势图：**
- 显示各类错误随时间的变化
- 标识出问题高发时间段
- 分析错误的周期性规律

**改进效果跟踪：**
- 修复措施实施前后的对比
- 问题解决率统计
- 预防措施效果评估

### 5.6 自定义报表

#### 5.6.1 报表模板
**预定义模板：**
- **日报模板**：每日运行状况总结
- **周报模板**：周度性能分析
- **月报模板**：月度总结和趋势分析
- **故障报告模板**：问题分析专用

#### 5.6.2 报表生成与分享
**生成选项：**
- **格式选择**：PDF、Excel、PowerPoint
- **内容自定义**：选择要包含的图表和数据
- **样式设置**：公司Logo、颜色主题

**分享方式：**
- **邮件发送**：自动发送给指定收件人
- **链接分享**：生成可访问的在线链接
- **定期推送**：设置自动生成和发送计划

### 5.7 数据导出功能

#### 5.7.1 导出选项
**数据范围：**
- 当前页面显示的数据
- 指定时间范围的完整数据
- 特定筛选条件下的数据

**导出格式：**
- **CSV格式**：便于Excel分析
- **JSON格式**：便于程序处理
- **Excel格式**：包含图表的完整报表

#### 5.7.2 数据脱敏
**敏感信息处理：**
- 用户ID：替换为匿名标识
- 个人信息：移除或加密处理
- 商业机密：按权限级别脱敏

---

## 6. 常见问题解答

### 6.1 登录与权限问题

**Q: 忘记密码怎么办？**
A: 点击登录页面的"忘记密码"链接，输入邮箱地址，系统会发送重置密码的邮件。

**Q: 提示权限不足怎么办？**
A: 请联系系统管理员为您分配相应的权限。不同角色有不同的功能访问权限。

**Q: 能否同时在多个设备登录？**
A: 支持，但建议不要在公共设备上保持登录状态。

### 6.2 性能与数据问题

**Q: 页面加载很慢怎么办？**
A: 
1. 检查网络连接是否稳定
2. 清除浏览器缓存
3. 尝试刷新页面
4. 如果问题持续，请联系技术支持

**Q: 数据显示不准确怎么办？**
A:
1. 确认选择的时间范围是否正确
2. 检查筛选条件设置
3. 点击刷新按钮更新数据
4. 如果数据仍有问题，请截图并联系技术支持

**Q: 为什么有些数据显示为"暂无数据"？**
A: 可能的原因：
- 选择的时间范围内确实没有数据
- 数据正在处理中，请稍后刷新
- 权限不足，无法查看该部分数据

### 6.3 功能使用问题

**Q: 如何搜索特定的会话？**
A:
1. 进入"会话查询"页面
2. 在搜索框输入Session ID、用户ID或关键词
3. 设置合适的筛选条件
4. 点击搜索或按回车键

**Q: A/B测试需要运行多长时间？**
A: 建议至少运行7-14天，确保收集到足够的样本量（每组至少1000个样本）才能得出可靠结论。

**Q: 如何知道A/B测试的结果是否可信？**
A: 系统会自动计算统计显著性，当p值小于0.05时，结果具有统计学意义。同时要确保样本量充足。

### 6.4 数据导出与报表问题

**Q: 导出的数据包含敏感信息吗？**
A: 系统会自动进行数据脱敏处理，移除或加密敏感信息。您也可以在导出前确认脱敏设置。

**Q: 能否定制报表模板？**
A: 是的，您可以：
1. 选择需要的数据维度和指标
2. 设置图表类型和样式
3. 保存为自定义模板
4. 设置定期自动生成

**Q: 历史数据保存多长时间？**
A: 系统默认保存1年的详细数据，超过1年的数据会进行聚合存储。如需更长时间的数据，请联系管理员。

### 6.5 故障排除

**Q: 页面显示错误信息怎么办？**
A:
1. 记录具体的错误信息
2. 尝试刷新页面
3. 清除浏览器缓存
4. 检查网络连接
5. 如果问题持续，请联系技术支持并提供错误截图

**Q: 数据同步延迟怎么办？**
A: 系统数据通常有1-2分钟的延迟，这是正常的。如果延迟超过5分钟，请检查系统状态或联系技术支持。

### 6.6 联系支持

**技术支持渠道：**
- 📧 邮箱：support@cogvision.com
- 💬 在线客服：点击右下角客服图标
- 📞 电话：400-XXX-XXXX（工作时间：9:00-18:00）

**提交问题时请提供：**
- 详细的问题描述
- 操作步骤
- 错误截图
- 使用的浏览器和版本
- 出现问题的时间

---

## 附录

### A. 键盘快捷键
| 快捷键 | 功能 |
|-------|------|
| Ctrl + R | 刷新当前页面 |
| Ctrl + F | 在页面内搜索 |
| Ctrl + Shift + E | 快速导出数据 |
| / | 聚焦到搜索框 |
| Esc | 关闭弹窗或模态框 |

### B. 浏览器兼容性说明
| 浏览器 | 最低版本 | 推荐版本 | 备注 |
|-------|---------|---------|------|
| Chrome | 90+ | 最新版本 | 推荐使用 |
| Firefox | 88+ | 最新版本 | 完全支持 |
| Safari | 14+ | 最新版本 | macOS用户推荐 |
| Edge | 90+ | 最新版本 | Windows用户推荐 |

### C. 术语对照表
| 中文术语 | 英文术语 | 说明 |
|---------|---------|------|
| 数字员工 | Digital Employee | 基于AI的智能助手 |
| 会话 | Session | 一次完整的对话交互 |
| LLM | Large Language Model | 大语言模型 |
| MCP | Model Context Protocol | 模型上下文协议 |
| Token | Token | 文本处理的最小单位 |
| A/B测试 | A/B Testing | 对比实验方法 |

---

**文档版本**：v1.0  
**最后更新**：2024-08-21  
**适用系统版本**：CogVision v1.0+