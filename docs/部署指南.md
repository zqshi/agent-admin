# CogVision ÈÉ®ÁΩ≤ÊåáÂçó

## Âø´ÈÄüÈÉ®ÁΩ≤

### ÊñπÂºè‰∏ÄÔºöDocker Compose ÈÉ®ÁΩ≤ (Êé®Ëçê)

**1. ÂáÜÂ§áÁéØÂ¢ÉÂèòÈáèÊñá‰ª∂**
```bash
# ÂàõÂª∫ .env Êñá‰ª∂
cat > .env << EOF
POSTGRES_PASSWORD=your-secure-postgres-password
REDIS_PASSWORD=your-secure-redis-password
INFLUXDB_PASSWORD=your-secure-influxdb-password
JWT_SECRET=your-jwt-secret-key
DOMAIN=cogvision.yourdomain.com
EOF
```

**2. ÂêØÂä®ÊúçÂä°**
```bash
# ÂÖãÈöÜÈ°πÁõÆ
git clone https://github.com/your-org/cogvision-admin.git
cd cogvision-admin

# ÂêØÂä®ÊâÄÊúâÊúçÂä°
docker-compose up -d

# Êü•ÁúãÊúçÂä°Áä∂ÊÄÅ
docker-compose ps
```

**3. ËÆøÈóÆÂ∫îÁî®**
- ÂâçÁ´ØÁïåÈù¢: http://localhost:3000
- APIÊñáÊ°£: http://localhost:8080/api/docs

### ÊñπÂºè‰∫åÔºöKubernetes ÈÉ®ÁΩ≤

**1. ÂàõÂª∫ÂëΩÂêçÁ©∫Èó¥ÂíåÈÖçÁΩÆ**
```bash
# Â∫îÁî®KubernetesÈÖçÁΩÆ
kubectl apply -f k8s/

# Êü•ÁúãÈÉ®ÁΩ≤Áä∂ÊÄÅ
kubectl get pods -n cogvision
```

**2. ÈÖçÁΩÆÂüüÂêç**
```bash
# Êõ¥Êñ∞IngressÈÖçÁΩÆ‰∏≠ÁöÑÂüüÂêç
kubectl patch ingress cogvision-ingress -n cogvision -p '{"spec":{"rules":[{"host":"your-domain.com"}]}}'
```

### ÊñπÂºè‰∏âÔºö‰º†ÁªüÈÉ®ÁΩ≤

**ÂâçÁ´ØÈÉ®ÁΩ≤:**
```bash
# ÊûÑÂª∫ÂâçÁ´Ø
npm ci
npm run build

# ÈÖçÁΩÆNginx
sudo cp nginx.conf /etc/nginx/sites-available/cogvision
sudo ln -s /etc/nginx/sites-available/cogvision /etc/nginx/sites-enabled/
sudo systemctl reload nginx
```

**ÂêéÁ´ØÈÉ®ÁΩ≤:**
```bash
# ÂÆâË£ÖÂêéÁ´Ø‰æùËµñ
cd api && npm ci

# ÂêØÂä®ÂêéÁ´ØÊúçÂä°
npm run start:prod
```

## ÁéØÂ¢ÉË¶ÅÊ±Ç

| ÁªÑ‰ª∂ | ÊúÄ‰ΩéË¶ÅÊ±Ç | Êé®ËçêÈÖçÁΩÆ |
|-----|---------|---------|
| **CPU** | 2Ê†∏ | 4Ê†∏+ |
| **ÂÜÖÂ≠ò** | 4GB | 8GB+ |
| **Á£ÅÁõò** | 50GB | 100GB SSD |
| **Êìç‰ΩúÁ≥ªÁªü** | Ubuntu 18.04+ | Ubuntu 20.04+ |
| **Node.js** | 18.x | 18.x LTS |
| **Docker** | 20.10+ | ÊúÄÊñ∞ÁâàÊú¨ |

## ÈÖçÁΩÆÊñá‰ª∂ËØ¥Êòé

### Docker Compose ÈÖçÁΩÆ

‰∏ªË¶ÅÊúçÂä°ÈÖçÁΩÆÂú® `docker-compose.yml` ‰∏≠Ôºö

```yaml
services:
  frontend:    # React ÂâçÁ´ØÂ∫îÁî®
  backend:     # Node.js ÂêéÁ´Ø API
  postgres:    # ‰∏ªÊï∞ÊçÆÂ∫ì
  influxdb:    # Êó∂Â∫èÊï∞ÊçÆÂ∫ì
  redis:       # ÁºìÂ≠òÊï∞ÊçÆÂ∫ì
```

### ÁéØÂ¢ÉÂèòÈáè

| ÂèòÈáèÂêç | ËØ¥Êòé | Á§∫‰æãÂÄº |
|-------|------|-------|
| `POSTGRES_PASSWORD` | PostgreSQL Êï∞ÊçÆÂ∫ìÂØÜÁ†Å | `secure-password-123` |
| `REDIS_PASSWORD` | Redis ÂØÜÁ†Å | `redis-password-456` |
| `JWT_SECRET` | JWT Á≠æÂêçÂØÜÈí• | `your-jwt-secret` |
| `DOMAIN` | Â∫îÁî®ÂüüÂêç | `cogvision.example.com` |

## Êï∞ÊçÆÂàùÂßãÂåñ

### Êï∞ÊçÆÂ∫ìÂàùÂßãÂåñ

**PostgreSQL:**
```bash
# ËøõÂÖ•Êï∞ÊçÆÂ∫ìÂÆπÂô®
docker-compose exec postgres psql -U cogvision_user -d cogvision

# ÊâßË°åÂàùÂßãÂåñSQL
\i /docker-entrypoint-initdb.d/init.sql
```

**InfluxDB:**
```bash
# ÂàõÂª∫ÂàùÂßãbucketÂíåÁî®Êà∑
docker-compose exec influxdb influx setup \
  --username admin \
  --password your-password \
  --org cogvision \
  --bucket metrics
```

### ÂàùÂßãÊï∞ÊçÆÂØºÂÖ•

**ÂØºÂÖ•ÊºîÁ§∫Êï∞ÊçÆ:**
```bash
# ÂØºÂÖ•‰ºöËØùÊï∞ÊçÆ
curl -X POST http://localhost:8080/api/admin/import-demo-data \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## ÂÅ•Â∫∑Ê£ÄÊü•

### ÊúçÂä°Áä∂ÊÄÅÊ£ÄÊü•

```bash
# Ê£ÄÊü•ÊâÄÊúâÊúçÂä°
docker-compose ps

# Ê£ÄÊü•ÂâçÁ´Ø
curl -I http://localhost:3000

# Ê£ÄÊü•ÂêéÁ´ØAPI
curl -I http://localhost:8080/health

# Ê£ÄÊü•Êï∞ÊçÆÂ∫ìËøûÊé•
curl -I http://localhost:8080/api/health/db
```

### Êó•ÂøóÊü•Áúã

```bash
# Êü•ÁúãÊâÄÊúâÊúçÂä°Êó•Âøó
docker-compose logs

# Êü•ÁúãÁâπÂÆöÊúçÂä°Êó•Âøó
docker-compose logs -f backend
docker-compose logs -f postgres
```

## SSL/TLS ÈÖçÁΩÆ

### ‰ΩøÁî® Let's Encrypt

```bash
# ÂÆâË£Ö Certbot
sudo apt install certbot python3-certbot-nginx

# Ëé∑ÂèñSSLËØÅ‰π¶
sudo certbot --nginx -d your-domain.com

# Ëá™Âä®Áª≠Êúü
echo "0 12 * * * /usr/bin/certbot renew --quiet" | sudo crontab -
```

### ‰ΩøÁî®Ëá™Á≠æÂêçËØÅ‰π¶

```bash
# ÁîüÊàêËá™Á≠æÂêçËØÅ‰π¶
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout ./ssl/private.key \
  -out ./ssl/certificate.crt
```

## ÁõëÊéßÈÖçÁΩÆ

### Prometheus + Grafana

```bash
# ÂêØÂä®ÁõëÊéßÊúçÂä°
docker-compose -f docker-compose.monitoring.yml up -d

# ËÆøÈóÆGrafana
open http://localhost:3001
# ÈªòËÆ§Áî®Êà∑Âêç/ÂØÜÁ†Å: admin/admin
```

### Âü∫Á°ÄÁõëÊéßÊåáÊ†á

- **Â∫îÁî®ÂÅ•Â∫∑Áä∂ÊÄÅ**: HTTPÂÅ•Â∫∑Ê£ÄÊü•
- **ÂìçÂ∫îÊó∂Èó¥**: APIÂìçÂ∫îÊó∂Èó¥ÁõëÊéß
- **ÈîôËØØÁéá**: 4xx/5xxÈîôËØØÁªüËÆ°
- **ËµÑÊ∫ê‰ΩøÁî®**: CPU„ÄÅÂÜÖÂ≠ò„ÄÅÁ£ÅÁõò‰ΩøÁî®Áéá

## Â§á‰ªΩÊÅ¢Â§ç

### Êï∞ÊçÆÂ§á‰ªΩ

```bash
# PostgreSQL Â§á‰ªΩ
docker-compose exec postgres pg_dump -U cogvision_user cogvision > backup.sql

# InfluxDB Â§á‰ªΩ
docker-compose exec influxdb influx backup /tmp/backup
docker cp cogvision-influxdb:/tmp/backup ./influxdb-backup
```

### Êï∞ÊçÆÊÅ¢Â§ç

```bash
# PostgreSQL ÊÅ¢Â§ç
docker-compose exec -T postgres psql -U cogvision_user cogvision < backup.sql

# InfluxDB ÊÅ¢Â§ç
docker cp ./influxdb-backup cogvision-influxdb:/tmp/backup
docker-compose exec influxdb influx restore /tmp/backup
```

## Â∏∏ËßÅÈóÆÈ¢ò

### Á´ØÂè£ÂÜ≤Á™Å

Â¶ÇÊûúÁ´ØÂè£Ë¢´Âç†Áî®ÔºåÂèØ‰ª•‰øÆÊîπ `docker-compose.yml` ‰∏≠ÁöÑÁ´ØÂè£Êò†Â∞ÑÔºö

```yaml
services:
  frontend:
    ports:
      - "8001:80"  # Êîπ‰∏∫ÂÖ∂‰ªñÁ´ØÂè£
  backend:
    ports:
      - "8081:8080"  # Êîπ‰∏∫ÂÖ∂‰ªñÁ´ØÂè£
```

### ÂÜÖÂ≠ò‰∏çË∂≥

ÂØπ‰∫é‰ΩéÂÜÖÂ≠òÁéØÂ¢ÉÔºåÂèØ‰ª•Ë∞ÉÊï¥ÊúçÂä°ÈÖçÁΩÆÔºö

```yaml
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 512M
        reservations:
          memory: 256M
```

### Êï∞ÊçÆÂ∫ìËøûÊé•ÈóÆÈ¢ò

Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊúçÂä°ÊòØÂê¶Ê≠£Â∏∏ÂêØÂä®Ôºö

```bash
# Ê£ÄÊü•PostgreSQL
docker-compose exec postgres pg_isready

# Ê£ÄÊü•ËøûÊé•
docker-compose exec backend npm run db:test
```

## ÊÄßËÉΩ‰ºòÂåñ

### Áîü‰∫ßÁéØÂ¢É‰ºòÂåñ

**1. ÂêØÁî®ÁºìÂ≠ò**
```bash
# Redis ÁºìÂ≠òÈÖçÁΩÆ
export REDIS_CACHE_TTL=3600
export ENABLE_QUERY_CACHE=true
```

**2. Êï∞ÊçÆÂ∫ì‰ºòÂåñ**
```sql
-- PostgreSQL ÈÖçÁΩÆ‰ºòÂåñ
ALTER SYSTEM SET shared_buffers = '256MB';
ALTER SYSTEM SET effective_cache_size = '1GB';
```

**3. ÂâçÁ´Ø‰ºòÂåñ**
```bash
# ÂêØÁî®GzipÂéãÁº©
nginx_conf="gzip on; gzip_types text/plain text/css application/json;"
```

### Êâ©ÂÆπÊåáÂçó

**Ê∞¥Âπ≥Êâ©ÂÆπÂêéÁ´Ø:**
```yaml
services:
  backend:
    deploy:
      replicas: 3  # Â¢ûÂä†ÂâØÊú¨Êï∞
```

**Êï∞ÊçÆÂ∫ìËØªÂÜôÂàÜÁ¶ª:**
```yaml
services:
  postgres-master:
    # ‰∏ªÊï∞ÊçÆÂ∫ìÈÖçÁΩÆ
  postgres-slave:
    # ‰ªéÊï∞ÊçÆÂ∫ìÈÖçÁΩÆ
```

## ÂÆâÂÖ®ÈÖçÁΩÆ

### ÁΩëÁªúÂÆâÂÖ®

```bash
# Èò≤ÁÅ´Â¢ôÈÖçÁΩÆ
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

### Â∫îÁî®ÂÆâÂÖ®

```yaml
# Docker Compose ÂÆâÂÖ®ÈÖçÁΩÆ
services:
  backend:
    security_opt:
      - no-new-privileges:true
    read_only: true
    user: "1001:1001"
```

## ÊïÖÈöúÊéíÊü•

### Â∏∏ËßÅÈîôËØØÂèäËß£ÂÜ≥ÊñπÊ°à

**1. Â∫îÁî®Êó†Ê≥ïÂêØÂä®**
```bash
# Ê£ÄÊü•Êó•Âøó
docker-compose logs backend
# Ê£ÄÊü•ÈÖçÁΩÆ
docker-compose config
```

**2. Êï∞ÊçÆÂ∫ìËøûÊé•Â§±Ë¥•**
```bash
# Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÁä∂ÊÄÅ
docker-compose exec postgres pg_isready
# Ê£ÄÊü•ÁΩëÁªúËøûÊé•
docker-compose exec backend ping postgres
```

**3. ÂâçÁ´ØÈ°µÈù¢Á©∫ÁôΩ**
```bash
# Ê£ÄÊü•ÊûÑÂª∫‰∫ßÁâ©
docker-compose exec frontend ls -la /usr/share/nginx/html
# Ê£ÄÊü•NginxÈÖçÁΩÆ
docker-compose exec frontend nginx -t
```

## ÂçáÁ∫ßÊåáÂçó

### Â∫îÁî®ÂçáÁ∫ß

```bash
# 1. Â§á‰ªΩÊï∞ÊçÆ
./scripts/backup.sh

# 2. ÊãâÂèñÊúÄÊñ∞‰ª£Á†Å
git pull origin main

# 3. ÈáçÊñ∞ÊûÑÂª∫ÈïúÂÉè
docker-compose build

# 4. ÊªöÂä®Êõ¥Êñ∞
docker-compose up -d --force-recreate
```

### Êï∞ÊçÆÂ∫ìËøÅÁßª

```bash
# ÊâßË°åÊï∞ÊçÆÂ∫ìËøÅÁßª
docker-compose exec backend npm run migrate:latest

# È™åËØÅËøÅÁßªÁªìÊûú
docker-compose exec backend npm run migrate:status
```

---

## Ëé∑ÂèñÊîØÊåÅ

- üìö **ÂÆåÊï¥ÊñáÊ°£**: [ÈÉ®ÁΩ≤ËøêÁª¥ÊåáÂçó](./ÈÉ®ÁΩ≤ËøêÁª¥ÊåáÂçó.md)
- üêõ **ÈóÆÈ¢òÂèçÈ¶à**: [GitHub Issues](https://github.com/your-org/cogvision-admin/issues)
- üí¨ **ÊäÄÊúØÊîØÊåÅ**: support@cogvision.com
- üìû **Á¥ßÊÄ•ËÅîÁ≥ª**: +86-400-XXX-XXXX

---

**ÊúÄÂêéÊõ¥Êñ∞**: 2024-08-21  
**ÈÄÇÁî®ÁâàÊú¨**: CogVision v1.0+